<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Cardano.Launcher</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Cardano.Launcher.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">cardano-wallet-launcher-2019.7.24: Utilities for a building commands launcher</p></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>&#169; 2018-2019 IOHK</td></tr><tr><th>License</th><td>Apache-2.0</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Cardano.Launcher</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module contains a mechanism for launching external processes together,
 and provides the functionality needed to kill them all if one goes down.
 (would be achieved using <code>monitor</code> and <code>kill</code> in combination)</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:Command">Command</a> = <a href="#v:Command">Command</a> {<ul class="subs"><li><a href="#v:cmdName">cmdName</a> :: <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li><a href="#v:cmdArgs">cmdArgs</a> :: [<a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>]</li><li><a href="#v:cmdSetup">cmdSetup</a> :: <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> ()</li><li><a href="#v:cmdOutput">cmdOutput</a> :: <a href="Cardano-Launcher.html#t:StdStream" title="Cardano.Launcher">StdStream</a></li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:StdStream">StdStream</a><ul class="subs"><li>= <a href="#v:Inherit">Inherit</a></li><li>| <a href="#v:UseHandle">UseHandle</a> <a href="../base-4.12.0.0/GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a></li><li>| <a href="#v:CreatePipe">CreatePipe</a></li><li>| <a href="#v:NoStream">NoStream</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:ProcessHasExited">ProcessHasExited</a> = <a href="#v:ProcessHasExited">ProcessHasExited</a> <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="../base-4.12.0.0/System-Exit.html#t:ExitCode" title="System.Exit">ExitCode</a></li><li class="src short"><a href="#v:launch">launch</a> :: [<a href="Cardano-Launcher.html#t:Command" title="Cardano.Launcher">Command</a>] -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="Cardano-Launcher.html#t:ProcessHasExited" title="Cardano.Launcher">ProcessHasExited</a></li><li class="src short"><a href="#v:installSignalHandlers">installSignalHandlers</a> :: <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> ()</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Command" class="def">Command</a> <a href="src/Cardano.Launcher.html#Command" class="link">Source</a> <a href="#t:Command" class="selflink">#</a></p><div class="doc"><p>Represent a command to execute. Args are provided as a list where options
 are expected to be prefixed with `--` or <code><a href="../base-4.12.0.0/Prelude.html#v:-45-" title="Prelude">-</a></code>. For example:</p><pre>Command &quot;cardano-wallet&quot;
    [ &quot;server&quot;
    , &quot;--port&quot;, &quot;8080&quot;
    , &quot;--network&quot;, &quot;mainnet&quot;
    ] (return ())
    Inherit
</pre></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Command" class="def">Command</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:cmdName" class="def">cmdName</a> :: <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:cmdArgs" class="def">cmdArgs</a> :: [<a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>]</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:cmdSetup" class="def">cmdSetup</a> :: <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> ()</dfn><div class="doc"><p>An extra action to run _before_ the command</p></div></li><li><dfn class="src"><a id="v:cmdOutput" class="def">cmdOutput</a> :: <a href="Cardano-Launcher.html#t:StdStream" title="Cardano.Launcher">StdStream</a></dfn><div class="doc"><p>What to do with stdout &amp; stderr</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><details id="i:Command" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Command:Buildable:1"></span> Buildable <a href="Cardano-Launcher.html#t:Command" title="Cardano.Launcher">Command</a></span> <a href="src/Cardano.Launcher.html#line-75" class="link">Source</a> <a href="#t:Command" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Command:Buildable:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-Launcher.html">Cardano.Launcher</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:build">build</a> :: <a href="Cardano-Launcher.html#t:Command" title="Cardano.Launcher">Command</a> -&gt; <a href="../text-1.2.3.1/Data-Text-Lazy-Builder.html#t:Builder" title="Data.Text.Lazy.Builder">Builder</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:StdStream" class="def">StdStream</a> <a href="#t:StdStream" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Inherit" class="def">Inherit</a></td><td class="doc"><p>Inherit Handle from parent</p></td></tr><tr><td class="src"><a id="v:UseHandle" class="def">UseHandle</a> <a href="../base-4.12.0.0/GHC-IO-Handle.html#t:Handle" title="GHC.IO.Handle">Handle</a></td><td class="doc"><p>Use the supplied Handle</p></td></tr><tr><td class="src"><a id="v:CreatePipe" class="def">CreatePipe</a></td><td class="doc"><p>Create a new pipe.  The returned
 <code>Handle</code> will use the default encoding
 and newline translation mode (just
 like <code>Handle</code>s created by <code>openFile</code>).</p></td></tr><tr><td class="src"><a id="v:NoStream" class="def">NoStream</a></td><td class="doc"><p>Close the stream's file descriptor without
 passing a Handle. On POSIX systems this may
 lead to strange behavior in the child process
 because attempting to read or write after the
 file has been closed throws an error. This
 should only be used with child processes that
 don't use the file descriptor at all. If you
 wish to ignore the child process's output you
 should either create a pipe and drain it
 manually or pass a <code>Handle</code> that writes to
 <code>/dev/null</code>.</p></td></tr></table></div><div class="subs instances"><details id="i:StdStream" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:StdStream:Eq:1"></span> <a href="../base-4.12.0.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="Cardano-Launcher.html#t:StdStream" title="Cardano.Launcher">StdStream</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:StdStream:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../process-1.6.5.0/System-Process-Common.html">System.Process.Common</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Cardano-Launcher.html#t:StdStream" title="Cardano.Launcher">StdStream</a> -&gt; <a href="Cardano-Launcher.html#t:StdStream" title="Cardano.Launcher">StdStream</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Cardano-Launcher.html#t:StdStream" title="Cardano.Launcher">StdStream</a> -&gt; <a href="Cardano-Launcher.html#t:StdStream" title="Cardano.Launcher">StdStream</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:StdStream:Show:2"></span> <a href="../base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Cardano-Launcher.html#t:StdStream" title="Cardano.Launcher">StdStream</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:StdStream:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../process-1.6.5.0/System-Process-Common.html">System.Process.Common</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Cardano-Launcher.html#t:StdStream" title="Cardano.Launcher">StdStream</a> -&gt; <a href="../base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Cardano-Launcher.html#t:StdStream" title="Cardano.Launcher">StdStream</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Cardano-Launcher.html#t:StdStream" title="Cardano.Launcher">StdStream</a>] -&gt; <a href="../base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ProcessHasExited" class="def">ProcessHasExited</a> <a href="src/Cardano.Launcher.html#ProcessHasExited" class="link">Source</a> <a href="#t:ProcessHasExited" class="selflink">#</a></p><div class="doc"><p>ProcessHasExited is used by a monitoring thread to signal that the process
 has exited.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ProcessHasExited" class="def">ProcessHasExited</a> <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="../base-4.12.0.0/System-Exit.html#t:ExitCode" title="System.Exit">ExitCode</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><details id="i:ProcessHasExited" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ProcessHasExited:Show:1"></span> <a href="../base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Cardano-Launcher.html#t:ProcessHasExited" title="Cardano.Launcher">ProcessHasExited</a></span> <a href="src/Cardano.Launcher.html#line-93" class="link">Source</a> <a href="#t:ProcessHasExited" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ProcessHasExited:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-Launcher.html">Cardano.Launcher</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Cardano-Launcher.html#t:ProcessHasExited" title="Cardano.Launcher">ProcessHasExited</a> -&gt; <a href="../base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Cardano-Launcher.html#t:ProcessHasExited" title="Cardano.Launcher">ProcessHasExited</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Cardano-Launcher.html#t:ProcessHasExited" title="Cardano.Launcher">ProcessHasExited</a>] -&gt; <a href="../base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ProcessHasExited:Exception:2"></span> <a href="../base-4.12.0.0/Control-Exception-Base.html#t:Exception" title="Control.Exception.Base">Exception</a> <a href="Cardano-Launcher.html#t:ProcessHasExited" title="Cardano.Launcher">ProcessHasExited</a></span> <a href="src/Cardano.Launcher.html#line-95" class="link">Source</a> <a href="#t:ProcessHasExited" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ProcessHasExited:Exception:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-Launcher.html">Cardano.Launcher</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toException">toException</a> :: <a href="Cardano-Launcher.html#t:ProcessHasExited" title="Cardano.Launcher">ProcessHasExited</a> -&gt; <a href="../base-4.12.0.0/Control-Exception-Base.html#t:SomeException" title="Control.Exception.Base">SomeException</a> <a href="#v:toException" class="selflink">#</a></p><p class="src"><a href="#v:fromException">fromException</a> :: <a href="../base-4.12.0.0/Control-Exception-Base.html#t:SomeException" title="Control.Exception.Base">SomeException</a> -&gt; <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="Cardano-Launcher.html#t:ProcessHasExited" title="Cardano.Launcher">ProcessHasExited</a> <a href="#v:fromException" class="selflink">#</a></p><p class="src"><a href="#v:displayException">displayException</a> :: <a href="Cardano-Launcher.html#t:ProcessHasExited" title="Cardano.Launcher">ProcessHasExited</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:displayException" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:launch" class="def">launch</a> :: [<a href="Cardano-Launcher.html#t:Command" title="Cardano.Launcher">Command</a>] -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="Cardano-Launcher.html#t:ProcessHasExited" title="Cardano.Launcher">ProcessHasExited</a> <a href="src/Cardano.Launcher.html#launch" class="link">Source</a> <a href="#v:launch" class="selflink">#</a></p><div class="doc"><p>Run a bunch of command in separate processes. Note that, this operation is
 blocking and will throw when one of the given commands terminates. Commands
 are therefore expected to be daemon or long-running services.</p></div></div><div class="top"><p class="src"><a id="v:installSignalHandlers" class="def">installSignalHandlers</a> :: <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> () <a href="src/Cardano.Launcher.POSIX.html#installSignalHandlers" class="link">Source</a> <a href="#v:installSignalHandlers" class="selflink">#</a></p><div class="doc"><p>Convert any SIGTERM received to SIGINT, for which the runtime system has
 handlers that will correctly clean up sub-processes.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>