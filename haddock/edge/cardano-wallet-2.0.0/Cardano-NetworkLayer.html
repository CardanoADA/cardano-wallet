<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Cardano.NetworkLayer</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Cardano.NetworkLayer.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">cardano-wallet-2.0.0: The Wallet Backend for a Cardano node.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Cardano.NetworkLayer</p></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:NetworkLayer">NetworkLayer</a> m e0 e1 = <a href="#v:NetworkLayer">NetworkLayer</a> {<ul class="subs"><li><a href="#v:nextBlocks">nextBlocks</a> :: <a href="Cardano-Wallet-Primitive.html#t:SlotId" title="Cardano.Wallet.Primitive">SlotId</a> -&gt; <a href="../mtl-2.2.2/Control-Monad-Except.html#t:ExceptT" title="Control.Monad.Except">ExceptT</a> e0 m [<a href="Cardano-Wallet-Primitive.html#t:Block" title="Cardano.Wallet.Primitive">Block</a>]</li><li><a href="#v:networkTip">networkTip</a> :: <a href="../mtl-2.2.2/Control-Monad-Except.html#t:ExceptT" title="Control.Monad.Except">ExceptT</a> e1 m (<a href="Cardano-Wallet-Primitive.html#t:Hash" title="Cardano.Wallet.Primitive">Hash</a> &quot;BlockHeader&quot;, <a href="Cardano-Wallet-Primitive.html#t:BlockHeader" title="Cardano.Wallet.Primitive">BlockHeader</a>)</li></ul>}</li><li class="src short"><a href="#v:tick">tick</a> :: <span class="keyword">forall</span> st m a. <a href="../base-4.12.0.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; (st -&gt; m (<a href="Cardano-NetworkLayer.html#t:TickResult" title="Cardano.NetworkLayer">TickResult</a> a, st)) -&gt; (a -&gt; m ()) -&gt; Millisecond -&gt; st -&gt; m ()</li><li class="src short"><span class="keyword">data</span> <a href="#t:TickResult">TickResult</a> a<ul class="subs"><li>= <a href="#v:GotChunk">GotChunk</a> !a</li><li>| <a href="#v:Sleep">Sleep</a></li></ul></li><li class="src short"><a href="#v:listen">listen</a> :: <span class="keyword">forall</span> e0 e1. <a href="../base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> e0 =&gt; <a href="Cardano-NetworkLayer.html#t:NetworkLayer" title="Cardano.NetworkLayer">NetworkLayer</a> <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> e0 e1 -&gt; ([<a href="Cardano-Wallet-Primitive.html#t:Block" title="Cardano.Wallet.Primitive">Block</a>] -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> ()) -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> ()</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:NetworkLayer" class="def">NetworkLayer</a> m e0 e1 <a href="src/Cardano.NetworkLayer.html#NetworkLayer" class="link">Source</a> <a href="#t:NetworkLayer" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:NetworkLayer" class="def">NetworkLayer</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:nextBlocks" class="def">nextBlocks</a> :: <a href="Cardano-Wallet-Primitive.html#t:SlotId" title="Cardano.Wallet.Primitive">SlotId</a> -&gt; <a href="../mtl-2.2.2/Control-Monad-Except.html#t:ExceptT" title="Control.Monad.Except">ExceptT</a> e0 m [<a href="Cardano-Wallet-Primitive.html#t:Block" title="Cardano.Wallet.Primitive">Block</a>]</dfn><div class="doc"><p>Gets some blocks from the node. It will not necessarily return all
 the blocks that the node has, but will receive a reasonable-sized
 chunk. It will never return blocks from before the given slot. It
 may return an empty list if the node does not have any blocks from
 after the starting slot.</p></div></li><li><dfn class="src"><a id="v:networkTip" class="def">networkTip</a> :: <a href="../mtl-2.2.2/Control-Monad-Except.html#t:ExceptT" title="Control.Monad.Except">ExceptT</a> e1 m (<a href="Cardano-Wallet-Primitive.html#t:Hash" title="Cardano.Wallet.Primitive">Hash</a> &quot;BlockHeader&quot;, <a href="Cardano-Wallet-Primitive.html#t:BlockHeader" title="Cardano.Wallet.Primitive">BlockHeader</a>)</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:tick" class="def">tick</a> <a href="src/Cardano.NetworkLayer.html#tick" class="link">Source</a> <a href="#v:tick" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../base-4.12.0.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; (st -&gt; m (<a href="Cardano-NetworkLayer.html#t:TickResult" title="Cardano.NetworkLayer">TickResult</a> a, st))</td><td class="doc"><p>A way to get a new elements</p></td></tr><tr><td class="src">-&gt; (a -&gt; m ())</td><td class="doc"><p>Action to be taken on new elements</p></td></tr><tr><td class="src">-&gt; Millisecond</td><td class="doc"><p>Tick time</p></td></tr><tr><td class="src">-&gt; st</td><td class="doc"><p>Initial state.</p></td></tr><tr><td class="src">-&gt; m ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Repeatedly fetch data from a given source function, and call an action for
 each element retrieved.</p><p>If the data source indicates that it has no more data at present (<code><a href="Cardano-NetworkLayer.html#v:Sleep" title="Cardano.NetworkLayer">Sleep</a></code>),
 then sleep for the interval <code>delay</code>, and then try the fetch again.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:TickResult" class="def">TickResult</a> a <a href="src/Cardano.NetworkLayer.html#TickResult" class="link">Source</a> <a href="#t:TickResult" class="selflink">#</a></p><div class="doc"><p>The result type of the element fetch function provided to <code><a href="Cardano-NetworkLayer.html#v:tick" title="Cardano.NetworkLayer">tick</a></code>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:GotChunk" class="def">GotChunk</a> !a</td><td class="doc"><p>Have a result, and there may be more available.</p></td></tr><tr><td class="src"><a id="v:Sleep" class="def">Sleep</a></td><td class="doc"><p>There is no result available now, so wait.</p></td></tr></table></div><div class="subs instances"><details id="i:TickResult" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TickResult:Foldable:1"></span> <a href="../base-4.12.0.0/Data-Foldable.html#t:Foldable" title="Data.Foldable">Foldable</a> <a href="Cardano-NetworkLayer.html#t:TickResult" title="Cardano.NetworkLayer">TickResult</a></span> <a href="src/Cardano.NetworkLayer.html#line-71" class="link">Source</a> <a href="#t:TickResult" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TickResult:Foldable:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-NetworkLayer.html">Cardano.NetworkLayer</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fold">fold</a> :: <a href="../base-4.12.0.0/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> m =&gt; <a href="Cardano-NetworkLayer.html#t:TickResult" title="Cardano.NetworkLayer">TickResult</a> m -&gt; m <a href="#v:fold" class="selflink">#</a></p><p class="src"><a href="#v:foldMap">foldMap</a> :: <a href="../base-4.12.0.0/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> m =&gt; (a -&gt; m) -&gt; <a href="Cardano-NetworkLayer.html#t:TickResult" title="Cardano.NetworkLayer">TickResult</a> a -&gt; m <a href="#v:foldMap" class="selflink">#</a></p><p class="src"><a href="#v:foldr">foldr</a> :: (a -&gt; b -&gt; b) -&gt; b -&gt; <a href="Cardano-NetworkLayer.html#t:TickResult" title="Cardano.NetworkLayer">TickResult</a> a -&gt; b <a href="#v:foldr" class="selflink">#</a></p><p class="src"><a href="#v:foldr-39-">foldr'</a> :: (a -&gt; b -&gt; b) -&gt; b -&gt; <a href="Cardano-NetworkLayer.html#t:TickResult" title="Cardano.NetworkLayer">TickResult</a> a -&gt; b <a href="#v:foldr-39-" class="selflink">#</a></p><p class="src"><a href="#v:foldl">foldl</a> :: (b -&gt; a -&gt; b) -&gt; b -&gt; <a href="Cardano-NetworkLayer.html#t:TickResult" title="Cardano.NetworkLayer">TickResult</a> a -&gt; b <a href="#v:foldl" class="selflink">#</a></p><p class="src"><a href="#v:foldl-39-">foldl'</a> :: (b -&gt; a -&gt; b) -&gt; b -&gt; <a href="Cardano-NetworkLayer.html#t:TickResult" title="Cardano.NetworkLayer">TickResult</a> a -&gt; b <a href="#v:foldl-39-" class="selflink">#</a></p><p class="src"><a href="#v:foldr1">foldr1</a> :: (a -&gt; a -&gt; a) -&gt; <a href="Cardano-NetworkLayer.html#t:TickResult" title="Cardano.NetworkLayer">TickResult</a> a -&gt; a <a href="#v:foldr1" class="selflink">#</a></p><p class="src"><a href="#v:foldl1">foldl1</a> :: (a -&gt; a -&gt; a) -&gt; <a href="Cardano-NetworkLayer.html#t:TickResult" title="Cardano.NetworkLayer">TickResult</a> a -&gt; a <a href="#v:foldl1" class="selflink">#</a></p><p class="src"><a href="#v:toList">toList</a> :: <a href="Cardano-NetworkLayer.html#t:TickResult" title="Cardano.NetworkLayer">TickResult</a> a -&gt; [a] <a href="#v:toList" class="selflink">#</a></p><p class="src"><a href="#v:null">null</a> :: <a href="Cardano-NetworkLayer.html#t:TickResult" title="Cardano.NetworkLayer">TickResult</a> a -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:null" class="selflink">#</a></p><p class="src"><a href="#v:length">length</a> :: <a href="Cardano-NetworkLayer.html#t:TickResult" title="Cardano.NetworkLayer">TickResult</a> a -&gt; <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="#v:length" class="selflink">#</a></p><p class="src"><a href="#v:elem">elem</a> :: <a href="../base-4.12.0.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a =&gt; a -&gt; <a href="Cardano-NetworkLayer.html#t:TickResult" title="Cardano.NetworkLayer">TickResult</a> a -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:elem" class="selflink">#</a></p><p class="src"><a href="#v:maximum">maximum</a> :: <a href="../base-4.12.0.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> a =&gt; <a href="Cardano-NetworkLayer.html#t:TickResult" title="Cardano.NetworkLayer">TickResult</a> a -&gt; a <a href="#v:maximum" class="selflink">#</a></p><p class="src"><a href="#v:minimum">minimum</a> :: <a href="../base-4.12.0.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> a =&gt; <a href="Cardano-NetworkLayer.html#t:TickResult" title="Cardano.NetworkLayer">TickResult</a> a -&gt; a <a href="#v:minimum" class="selflink">#</a></p><p class="src"><a href="#v:sum">sum</a> :: <a href="../base-4.12.0.0/Prelude.html#t:Num" title="Prelude">Num</a> a =&gt; <a href="Cardano-NetworkLayer.html#t:TickResult" title="Cardano.NetworkLayer">TickResult</a> a -&gt; a <a href="#v:sum" class="selflink">#</a></p><p class="src"><a href="#v:product">product</a> :: <a href="../base-4.12.0.0/Prelude.html#t:Num" title="Prelude">Num</a> a =&gt; <a href="Cardano-NetworkLayer.html#t:TickResult" title="Cardano.NetworkLayer">TickResult</a> a -&gt; a <a href="#v:product" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TickResult:Eq:2"></span> <a href="../base-4.12.0.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a =&gt; <a href="../base-4.12.0.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> (<a href="Cardano-NetworkLayer.html#t:TickResult" title="Cardano.NetworkLayer">TickResult</a> a)</span> <a href="src/Cardano.NetworkLayer.html#line-71" class="link">Source</a> <a href="#t:TickResult" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TickResult:Eq:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-NetworkLayer.html">Cardano.NetworkLayer</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Cardano-NetworkLayer.html#t:TickResult" title="Cardano.NetworkLayer">TickResult</a> a -&gt; <a href="Cardano-NetworkLayer.html#t:TickResult" title="Cardano.NetworkLayer">TickResult</a> a -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Cardano-NetworkLayer.html#t:TickResult" title="Cardano.NetworkLayer">TickResult</a> a -&gt; <a href="Cardano-NetworkLayer.html#t:TickResult" title="Cardano.NetworkLayer">TickResult</a> a -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TickResult:Show:3"></span> <a href="../base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> a =&gt; <a href="../base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (<a href="Cardano-NetworkLayer.html#t:TickResult" title="Cardano.NetworkLayer">TickResult</a> a)</span> <a href="src/Cardano.NetworkLayer.html#line-71" class="link">Source</a> <a href="#t:TickResult" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TickResult:Show:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-NetworkLayer.html">Cardano.NetworkLayer</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Cardano-NetworkLayer.html#t:TickResult" title="Cardano.NetworkLayer">TickResult</a> a -&gt; <a href="../base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Cardano-NetworkLayer.html#t:TickResult" title="Cardano.NetworkLayer">TickResult</a> a -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Cardano-NetworkLayer.html#t:TickResult" title="Cardano.NetworkLayer">TickResult</a> a] -&gt; <a href="../base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:listen" class="def">listen</a> :: <span class="keyword">forall</span> e0 e1. <a href="../base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> e0 =&gt; <a href="Cardano-NetworkLayer.html#t:NetworkLayer" title="Cardano.NetworkLayer">NetworkLayer</a> <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> e0 e1 -&gt; ([<a href="Cardano-Wallet-Primitive.html#t:Block" title="Cardano.Wallet.Primitive">Block</a>] -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> ()) -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> () <a href="src/Cardano.NetworkLayer.html#listen" class="link">Source</a> <a href="#v:listen" class="selflink">#</a></p><div class="doc"><p>Retrieve blocks from a chain producer and execute some given action for
 each block.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>